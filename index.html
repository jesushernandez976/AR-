<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Hello, WebVR! • A-Frame</title>
    <meta name="description" content="Hello, WebVR! • A-Frame" />
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  </head>
  <body style="margin: 0px; overflow: hidden;">
    <a-scene embedded arjs="detectionMode: mono; trackingMethod: best; smooth: true;">
      <a-marker preset="kanji" size="2">
        <a-entity
          id="model"
          position="0 -2.5 0"
          scale="5 5 5"
          gltf-model="https://cdn.glitch.global/11f87b4d-87c2-4a8d-b332-ffb5f42efbcd/3D_Hoodie_Mockup3.glb?v=1730191568823"
          animation="property: rotation; to: 0 360 0; dur: 5000; loop: true; easing: linear">
        </a-entity>
      </a-marker>
      <a-entity camera></a-entity>
    </a-scene>

    <script>
      // Array of model URLs
      const modelUrls = [
        "https://cdn.glitch.global/11f87b4d-87c2-4a8d-b332-ffb5f42efbcd/3D_Hoodie_Mockup3.glb?v=1730191568823",
        "https://cdn.glitch.global/11f87b4d-87c2-4a8d-b332-ffb5f42efbcd/3D_Hoodie_Mockup4.glb?v=1730193431159",
        "https://cdn.glitch.global/11f87b4d-87c2-4a8d-b332-ffb5f42efbcd/3D_Hoodie_Mockup5.glb?v=1730193436880"
      ];

      let currentModelIndex = 0;

      // Function to change the model link
      function changeModel() {
        const modelEntity = document.getElementById('model');
        currentModelIndex = (currentModelIndex + 1) % modelUrls.length; // Cycle through models
        modelEntity.setAttribute('gltf-model', modelUrls[currentModelIndex]);
      }

      // Change the model link every 5 seconds (5000 milliseconds)
      setInterval(changeModel, 6000);

      const model = document.getElementById('model');
      let lastPosition = { x: 0, y: 0, z: 0 };

      function smoothPosition() {
          const currentPosition = model.object3D.position;
          // Apply smoothing factor (0.8 - 0.95 is typical)
          currentPosition.x = lastPosition.x * 0.8 + currentPosition.x * 0.2;
          currentPosition.y = lastPosition.y * 0.8 + currentPosition.y * 0.2;
          currentPosition.z = lastPosition.z * 0.8 + currentPosition.z * 0.2;

          lastPosition = { ...currentPosition };
          requestAnimationFrame(smoothPosition);
      }

      smoothPosition();
    </script>
  </body>
</html>
